###
# TESTES DAS ROTAS DE PEDIDOS
# Use a extensão "REST Client" do VS Code para rodar estes testes
# Atalho: Ctrl+Alt+R (ou clique em "Send Request" acima de cada requisição)
###

@baseUrl = http://localhost:3000/api

###
# 1. TESTAR CONEXÃO COM O BANCO
# GET /api/status
###
GET {{baseUrl}}/status
Content-Type: application/json

###
# 2. LISTAR TODOS OS ITENS DISPONÍVEIS
# (Você precisa saber os IDs dos itens para criar pedidos)
###
GET {{baseUrl}}/itens
Content-Type: application/json

###
# 3. LISTAR TODOS OS PEDIDOS
# GET /api/pedidos
###
GET {{baseUrl}}/pedidos
Content-Type: application/json

###
# 4. CRIAR UM NOVO PEDIDO
# POST /api/pedidos
# 
# IMPORTANTE: Ajuste os "id_item" de acordo com os itens disponíveis
# que você viu na resposta do teste #2
###
POST {{baseUrl}}/pedidos
Content-Type: application/json

{
  "praViagem": true,
  "observacoes": "sem cebola e sem tomate",
  "itens": [
    {
      "id_item": 1,
      "quantidade": 2
    },
    {
      "id_item": 3,
      "quantidade": 1
    }
  ]
}

###
# 5. BUSCAR PEDIDO POR ID (com itens)
# Substitua o "1" pelo ID do pedido que você criou no teste #4
###
GET {{baseUrl}}/pedidos/1
Content-Type: application/json

###
# 6. TESTE COM ID INVÁLIDO (deve retornar 400)
###
GET {{baseUrl}}/pedidos/abc
Content-Type: application/json

###
# 7. TESTE COM PEDIDO INEXISTENTE (deve retornar 404)
###
GET {{baseUrl}}/pedidos/9999
Content-Type: application/json

###
# 8. TESTE CRIAR PEDIDO SEM ITENS (deve retornar 400)
###
POST {{baseUrl}}/pedidos
Content-Type: application/json

{
  "praViagem": true,
  "observacoes": "teste",
  "itens": []
}

###
# 9. TESTE CRIAR PEDIDO COM ITEM INVÁLIDO (deve retornar 400)
###
POST {{baseUrl}}/pedidos
Content-Type: application/json

{
  "praViagem": true,
  "observacoes": "teste",
  "itens": [
    {
      "id_item": 9999,
      "quantidade": 1
    }
  ]
}

###
# 10. TESTE CRIAR PEDIDO COM QUANTIDADE INVÁLIDA (deve retornar 400)
###
POST {{baseUrl}}/pedidos
Content-Type: application/json

{
  "praViagem": true,
  "observacoes": "teste",
  "itens": [
    {
      "id_item": 1,
      "quantidade": 0
    }
  ]
}

###
# 11. CRIAR PEDIDO PARA CONSUMIR NO LOCAL
###
POST {{baseUrl}}/pedidos
Content-Type: application/json

{
  "praViagem": false,
  "observacoes": "mesa 5, sem gelo",
  "itens": [
    {
      "id_item": 2,
      "quantidade": 1
    },
    {
      "id_item": 10,
      "quantidade": 3
    }
  ]
}

###
# 12. CRIAR PEDIDO GRANDE
###
POST {{baseUrl}}/pedidos
Content-Type: application/json

{
  "praViagem": true,
  "observacoes": "urgente, cliente importante",
  "itens": [
    {
      "id_item": 1,
      "quantidade": 3
    },
    {
      "id_item": 2,
      "quantidade": 2
    },
    {
      "id_item": 4,
      "quantidade": 1
    },
    {
      "id_item": 10,
      "quantidade": 5
    }
  ]
}
